module.exports = {

"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/util [external] (util, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/process [external] (process, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("process", () => require("process"));

module.exports = mod;
}}),
"[externals]/tls [external] (tls, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/os [external] (os, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}}),
"[externals]/net [external] (net, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}}),
"[externals]/events [external] (events, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/http2 [external] (http2, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http2", () => require("http2"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/dns [external] (dns, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}}),
"[externals]/zlib [external] (zlib, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}}),
"[project]/src/lib/firebase.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
// lib/firebase.js (หรือ src/lib/firebase.js)
__turbopack_context__.s({
    "app": (()=>app),
    "auth": (()=>auth),
    "db": (()=>db)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$firebase$2f$app$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/firebase/app/dist/index.mjs [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm2017$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@firebase/app/dist/esm/index.esm2017.js [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$firebase$2f$auth$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/firebase/auth/dist/index.mjs [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$auth$2f$dist$2f$node$2d$esm$2f$totp$2d$227b37e4$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__p__as__getAuth$3e$__ = __turbopack_context__.i("[project]/node_modules/@firebase/auth/dist/node-esm/totp-227b37e4.js [app-ssr] (ecmascript) <export p as getAuth>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$firebase$2f$firestore$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/firebase/firestore/dist/index.mjs [app-ssr] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@firebase/firestore/dist/index.node.mjs [app-ssr] (ecmascript)");
;
;
;
// Your web app's Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyDjKfFO7maPIOF8BspiU1wkLNgV9ipffNs",
    authDomain: "testmusic-79383.firebaseapp.com",
    projectId: "testmusic-79383",
    storageBucket: "testmusic-79383.firebasestorage.app",
    messagingSenderId: "198991673510",
    appId: "1:198991673510:web:0a16a620d9b5d1805adc67",
    measurementId: "G-5EW3XYPVR5"
};
// Initialize Firebase App (ป้องกันการ init ซ้ำ)
const app = !(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm2017$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getApps"])().length ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm2017$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["initializeApp"])(firebaseConfig) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm2017$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__["getApp"])();
// Initialize Firebase Services
const auth = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$auth$2f$dist$2f$node$2d$esm$2f$totp$2d$227b37e4$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__p__as__getAuth$3e$__["getAuth"])(app);
const db = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getFirestore"])(app);
;
 // -------------------------------------
}}),
"[project]/src/app/page.js [app-ssr] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
/* eslint-disable @next/next/no-img-element */ /* eslint-disable react/no-unescaped-entities */ __turbopack_context__.s({
    "default": (()=>AlbumMusicPlayer)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)");
// --- Firebase Imports ---
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$firebase$2f$firestore$2f$dist$2f$index$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/firebase/firestore/dist/index.mjs [app-ssr] (ecmascript) <module evaluation>"); // เพิ่ม query, where, orderBy
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@firebase/firestore/dist/index.node.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$firebase$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/firebase.js [app-ssr] (ecmascript)");
"use client";
;
;
;
;
function AlbumMusicPlayer() {
    // --- State Declarations ---
    const [allAlbums, setAllAlbums] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]); // State สำหรับเก็บข้อมูลอัลบั้มทั้งหมด
    const [albumSongs, setAlbumSongs] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]); // State สำหรับเก็บเพลงในอัลบั้มที่เลือก
    const [selectedAlbum, setSelectedAlbum] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null); // State เก็บอัลบั้มที่กำลังดูอยู่
    const [playlist, setPlaylist] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])([]); // เพลย์ลิสต์ส่วนตัวยังคงอยู่
    // Player State
    const [activeYoutubeId, setActiveYoutubeId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [currentSongInfo, setCurrentSongInfo] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    const [isPlayingFromPlaylist, setIsPlayingFromPlaylist] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false); // แยกการเล่นจาก Playlist ส่วนตัว
    const [currentPlaylistIndex, setCurrentPlaylistIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(-1);
    // UI State
    const [isLoadingAlbums, setIsLoadingAlbums] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false);
    const [isLoadingSongs, setIsLoadingSongs] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(false); // Loading state สำหรับเพลงในอัลบั้ม
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useState"])(null);
    // --- Effects ---
    // Effect 1: Fetch Albums & Load Playlist on initial mount
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // Function to fetch all albums
        const fetchAlbums = async ()=>{
            setIsLoadingAlbums(true);
            setError(null);
            try {
                const albumsCollectionRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["collection"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$firebase$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["db"], 'albums');
                // Optionally order albums, e.g., by releaseYear descending
                // const q = query(albumsCollectionRef, orderBy("releaseYear", "desc"));
                const albumSnapshot = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getDocs"])(albumsCollectionRef); // or getDocs(q)
                const albumList = albumSnapshot.docs.map((doc)=>({
                        id: doc.id,
                        ...doc.data()
                    }));
                if (Array.isArray(albumList)) {
                    setAllAlbums(albumList);
                } else {
                    throw new Error("Invalid album data format.");
                }
            } catch (err) {
                console.error("Firebase fetch albums error:", err);
                setError(err.message || "Failed to load albums.");
                setAllAlbums([]);
            } finally{
                setIsLoadingAlbums(false);
            }
        };
        // Function to load personal playlist
        const loadPlaylist = ()=>{
            const savedPlaylist = localStorage.getItem("musicPlaylist");
            // ... (โค้ด loadPlaylist เหมือนเดิม) ...
            if (savedPlaylist) {
                try {
                    const parsedPlaylist = JSON.parse(savedPlaylist);
                    if (Array.isArray(parsedPlaylist)) {
                        const validated = parsedPlaylist.filter((item)=>item && typeof item === 'object' && item.youtubeLink && item.songTitle && getYoutubeId(item.youtubeLink)).map((item)=>({
                                ...item,
                                songTitle: item.songTitle || 'Unknown Title',
                                bandName: item.bandName || 'Unknown Artist'
                            }));
                        setPlaylist(validated);
                    } else {
                        localStorage.removeItem("musicPlaylist");
                    }
                } catch (e) {
                    localStorage.removeItem("musicPlaylist");
                }
            }
        };
        fetchAlbums();
        loadPlaylist();
    }, []);
    // Effect 2: Fetch Songs when an album is selected
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        const fetchSongsForAlbum = async ()=>{
            if (!selectedAlbum || !selectedAlbum.id) {
                setAlbumSongs([]); // Clear songs if no album is selected
                return;
            }
            setIsLoadingSongs(true);
            setError(null);
            try {
                const songsCollectionRef = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["collection"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$firebase$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["db"], 'songs');
                // Query songs where albumId matches the selected album's ID
                // Order by trackNumber if available
                const q = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["query"])(songsCollectionRef, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["where"])("albumId", "==", selectedAlbum.id), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["orderBy"])("trackNumber", "asc") // 'asc' for ascending order (1, 2, 3...)
                );
                const songSnapshot = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$firebase$2f$firestore$2f$dist$2f$index$2e$node$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getDocs"])(q);
                const songList = songSnapshot.docs.map((doc)=>({
                        id: doc.id,
                        ...doc.data()
                    }));
                if (Array.isArray(songList)) {
                    setAlbumSongs(songList);
                } else {
                    throw new Error("Invalid song data format for album.");
                }
            } catch (err) {
                console.error(`Firebase fetch songs error for album ${selectedAlbum.id}:`, err);
                setError(err.message || `Failed to load songs for album "${selectedAlbum.title}".`);
                setAlbumSongs([]);
            } finally{
                setIsLoadingSongs(false);
            }
        };
        fetchSongsForAlbum();
    }, [
        selectedAlbum
    ]); // Re-run this effect when selectedAlbum changes
    // Effect 3: Save personal playlist to localStorage
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // ... (โค้ด save playlist เหมือนเดิม) ...
        if (Array.isArray(playlist)) {
            if (playlist.length > 0) {
                localStorage.setItem("musicPlaylist", JSON.stringify(playlist));
            } else {
                localStorage.removeItem("musicPlaylist");
            }
        }
    }, [
        playlist
    ]);
    // Effect 4: Update current song info for the mini player
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["useEffect"])(()=>{
        // ... (โค้ด update currentSongInfo เหมือนเดิม, แต่อาจต้องหาใน albumSongs ด้วย) ...
        if (!activeYoutubeId) {
            setCurrentSongInfo(null);
            return;
        }
        let foundSong = null;
        // 1. Check current playlist context first
        if (isPlayingFromPlaylist && currentPlaylistIndex >= 0 && currentPlaylistIndex < playlist.length) {
            const plSong = playlist[currentPlaylistIndex];
            if (plSong && getYoutubeId(plSong.youtubeLink) === activeYoutubeId) foundSong = plSong;
        }
        // 2. Check currently viewed album songs (if not found in playlist context)
        if (!foundSong && selectedAlbum && Array.isArray(albumSongs)) {
            foundSong = albumSongs.find((song)=>song && song.youtubeLink && getYoutubeId(song.youtubeLink) === activeYoutubeId);
        }
        // 3. Fallback: search the personal playlist again (covers edge cases)
        if (!foundSong && Array.isArray(playlist)) {
            foundSong = playlist.find((song)=>song && song.youtubeLink && getYoutubeId(song.youtubeLink) === activeYoutubeId);
        }
        // 4. Fallback: search allSongs (should ideally not be needed if UI flow is right)
        // if (!foundSong && Array.isArray(allSongs)) {
        //     foundSong = allSongs.find(song => song && song.youtubeLink && getYoutubeId(song.youtubeLink) === activeYoutubeId);
        // }
        setCurrentSongInfo(foundSong ? {
            id: foundSong.id || null,
            songTitle: foundSong.songTitle || 'Unknown Title',
            bandName: foundSong.bandName || 'Unknown Artist',
            youtubeLink: foundSong.youtubeLink,
            albumTitle: foundSong.albumTitle || selectedAlbum?.title || null,
            // Include coverUrl for mini player?
            coverUrl: foundSong.coverUrl || selectedAlbum?.coverUrl || null
        } : null);
    }, [
        activeYoutubeId,
        selectedAlbum,
        albumSongs,
        playlist,
        isPlayingFromPlaylist,
        currentPlaylistIndex
    ]);
    // --- Helper Functions ---
    const getYoutubeId = (url)=>{
        if (!url || typeof url !== 'string') return null;
        const regExp = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
        const match = url.match(regExp);
        if (match && match[1]) return match[1];
        if (!url.includes("http") && url.length >= 11 && !url.includes(" ")) return url;
        return null;
    };
    const getThumbnailUrl = (youtubeId, size = 'default')=>{
        if (!youtubeId) return `/api/placeholder/${size === 'mqdefault' ? '320/180' : '120/90'}`;
        return `https://img.youtube.com/vi/${youtubeId}/${size}.jpg`; // default, mqdefault, hqdefault
    };
    // --- Action Handlers ---
    // Select an album to view its songs
    const handleSelectAlbum = (album)=>{
        setSelectedAlbum(album);
        // When selecting an album, we are no longer playing specifically 'from the playlist' context
        // But don't stop playback if a song is already playing.
        // setIsPlayingFromPlaylist(false); // อาจจะไม่ต้อง reset ที่นี่ ขึ้นอยู่กับ UX ที่ต้องการ
        // setCurrentPlaylistIndex(-1);
        setError(null); // Clear errors when navigating
    };
    // Go back from song list to album list
    const handleBackToAlbums = ()=>{
        setSelectedAlbum(null);
        setAlbumSongs([]); // Clear the songs
        setError(null);
    };
    // Play a song (can be from album list or personal playlist)
    const handlePlaySong = (songData, fromPlaylist = false, index = -1)=>{
        if (!songData || !songData.youtubeLink) {
            setError("Missing song data or YouTube link.");
            return;
        }
        const youtubeId = getYoutubeId(songData.youtubeLink);
        if (youtubeId) {
            setActiveYoutubeId(youtubeId);
            setIsPlayingFromPlaylist(fromPlaylist); // สำคัญ: ตั้งค่าว่าเล่นจากไหน
            setCurrentPlaylistIndex(fromPlaylist ? index : -1); // ตั้ง index ถ้าเล่นจาก playlist
            setError(null);
        } else {
            setError(`Invalid YouTube link for "${songData.songTitle || 'this song'}".`);
        }
    };
    // --- Playlist Handlers (เหมือนเดิม) ---
    const handleAddToPlaylist = (songToAdd)=>{
        if (!songToAdd || typeof songToAdd !== 'object' || !songToAdd.youtubeLink || !songToAdd.songTitle) {
            alert("Cannot add invalid song data to playlist.");
            return;
        }
        const songYoutubeId = getYoutubeId(songToAdd.youtubeLink);
        if (!songYoutubeId) {
            alert("Invalid YouTube link, cannot add.");
            return;
        }
        const alreadyExists = playlist.some((item)=>item && item.youtubeLink && getYoutubeId(item.youtubeLink) === songYoutubeId);
        const title = songToAdd.songTitle || 'Unknown Title';
        if (!alreadyExists) {
            const entry = {
                id: songToAdd.id || `local-${Date.now()}`,
                songTitle: title,
                bandName: songToAdd.bandName || 'Unknown Artist',
                youtubeLink: songToAdd.youtubeLink,
                albumTitle: songToAdd.albumTitle || selectedAlbum?.title || null
            };
            setPlaylist((prev)=>[
                    ...prev,
                    entry
                ]);
            alert(`Added "${title}" to playlist.`);
        } else {
            alert(`"${title}" is already in the playlist.`);
        }
    };
    const handleRemoveFromPlaylist = (index)=>{
        if (index < 0 || index >= playlist.length) return;
        const songToRemove = playlist[index];
        const title = songToRemove?.songTitle || 'This song';
        const newPlaylist = playlist.filter((_, i)=>i !== index);
        setPlaylist(newPlaylist);
        alert(`Removed "${title}" from playlist.`);
        if (isPlayingFromPlaylist) {
            if (index === currentPlaylistIndex) {
                if (newPlaylist.length > 0) handlePlaySong(newPlaylist[index % newPlaylist.length], true, index % newPlaylist.length);
                else handleStopPlayback();
            } else if (index < currentPlaylistIndex) {
                setCurrentPlaylistIndex((prev)=>prev - 1);
            }
        }
    };
    const handleClearPlaylist = ()=>{
        if (playlist.length > 0 && confirm("Clear the entire playlist?")) {
            setPlaylist([]);
            if (isPlayingFromPlaylist) handleStopPlayback();
        }
    };
    // --- Player Controls (ทำงานกับ Playlist เท่านั้นในตอนนี้) ---
    const handlePlayNext = ()=>{
        if (!isPlayingFromPlaylist || playlist.length === 0) return;
        const nextIndex = (currentPlaylistIndex + 1) % playlist.length;
        handlePlaySong(playlist[nextIndex], true, nextIndex);
    };
    const handlePlayPrevious = ()=>{
        if (!isPlayingFromPlaylist || playlist.length === 0) return;
        const prevIndex = (currentPlaylistIndex - 1 + playlist.length) % playlist.length;
        handlePlaySong(playlist[prevIndex], true, prevIndex);
    };
    const handleShufflePlay = ()=>{
        if (playlist.length === 0) return;
        if (playlist.length === 1) {
            handlePlaySong(playlist[0], true, 0);
            return;
        }
        let randomIndex;
        do {
            randomIndex = Math.floor(Math.random() * playlist.length);
        }while (randomIndex === currentPlaylistIndex && playlist.length > 1)
        handlePlaySong(playlist[randomIndex], true, randomIndex);
    };
    const handleStopPlayback = ()=>{
        setActiveYoutubeId(null);
        setIsPlayingFromPlaylist(false);
        setCurrentPlaylistIndex(-1);
    };
    // --- Render Logic ---
    // Function to render the list of albums
    const renderAlbumList = ()=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                    style: styles.viewTitle,
                    children: "Albums"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 298,
                    columnNumber: 7
                }, this),
                isLoadingAlbums && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    style: styles.loadingBox,
                    children: "Loading albums..."
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 299,
                    columnNumber: 27
                }, this),
                !isLoadingAlbums && allAlbums.length === 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                    children: "No albums found."
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 300,
                    columnNumber: 54
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    style: styles.albumGrid,
                    children: allAlbums.map((album)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            style: styles.albumCard,
                            onClick: ()=>handleSelectAlbum(album),
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("img", {
                                    src: album.coverUrl || '/https://via.placeholder.com/200',
                                    alt: album.title || 'Album cover',
                                    style: styles.albumCover,
                                    loading: "lazy"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 304,
                                    columnNumber: 13
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    style: styles.albumInfo,
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                                            style: styles.albumTitle,
                                            title: album.title,
                                            children: album.title
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.js",
                                            lineNumber: 311,
                                            columnNumber: 15
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                            style: styles.albumArtist,
                                            title: album.album_name,
                                            children: album.album_name
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.js",
                                            lineNumber: 312,
                                            columnNumber: 15
                                        }, this),
                                        album.releaseYear && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                            style: styles.albumYear,
                                            children: album.releaseYear
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.js",
                                            lineNumber: 313,
                                            columnNumber: 37
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 310,
                                    columnNumber: 13
                                }, this)
                            ]
                        }, album.id, true, {
                            fileName: "[project]/src/app/page.js",
                            lineNumber: 303,
                            columnNumber: 11
                        }, this))
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 301,
                    columnNumber: 7
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/src/app/page.js",
            lineNumber: 297,
            columnNumber: 5
        }, this);
    // Function to render the songs within a selected album
    const renderAlbumSongs = ()=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                    onClick: handleBackToAlbums,
                    style: styles.backButton,
                    children: "← Back to Albums"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 325,
                    columnNumber: 7
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    style: styles.albumDetailHeader,
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("img", {
                            src: selectedAlbum.coverUrl || '/https://via.placeholder.com/200',
                            alt: selectedAlbum.title || '',
                            style: styles.albumDetailCover
                        }, void 0, false, {
                            fileName: "[project]/src/app/page.js",
                            lineNumber: 330,
                            columnNumber: 9
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                    style: {
                                        fontSize: '0.8em',
                                        margin: 0,
                                        color: '#888'
                                    },
                                    children: "ALBUM"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 336,
                                    columnNumber: 11
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                    style: {
                                        margin: '5px 0',
                                        fontSize: '1.8em'
                                    },
                                    children: selectedAlbum.title
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 337,
                                    columnNumber: 11
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                    style: {
                                        margin: 0,
                                        color: '#555'
                                    },
                                    children: [
                                        selectedAlbum.album_name,
                                        selectedAlbum.releaseYear && ` • ${selectedAlbum.releaseYear}`
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 338,
                                    columnNumber: 11
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                    onClick: ()=>albumSongs.length > 0 && handlePlaySong(albumSongs[0], false),
                                    style: {
                                        ...styles.actionButton,
                                        marginTop: '10px'
                                    },
                                    disabled: albumSongs.length === 0 || isLoadingSongs,
                                    children: "▶️ Play Album"
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 343,
                                    columnNumber: 11
                                }, this)
                            ]
                        }, void 0, true, {
                            fileName: "[project]/src/app/page.js",
                            lineNumber: 335,
                            columnNumber: 9
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 329,
                    columnNumber: 7
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h3", {
                    style: styles.viewTitle,
                    children: "Tracklist"
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 353,
                    columnNumber: 7
                }, this),
                isLoadingSongs && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    style: styles.loadingBox,
                    children: "Loading songs..."
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 354,
                    columnNumber: 26
                }, this),
                !isLoadingSongs && albumSongs.length === 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                    children: "No songs found in this album."
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 355,
                    columnNumber: 54
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    style: styles.songList,
                    children: albumSongs.map((song, index)=>{
                        if (!song || !song.youtubeLink || !song.songTitle) return null;
                        const youtubeId = getYoutubeId(song.youtubeLink);
                        // Check if this specific song instance is the one playing *and* it wasn't started from the personal playlist
                        const isActive = activeYoutubeId === youtubeId && !isPlayingFromPlaylist;
                        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            style: {
                                ...styles.songItem,
                                ...isActive ? styles.songItemActive : {}
                            },
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    style: styles.trackNumber,
                                    children: song.trackNumber || index + 1
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 370,
                                    columnNumber: 15
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    style: styles.songContent,
                                    onClick: ()=>handlePlaySong(song, false),
                                    title: `Play ${song.songTitle}`,
                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        style: styles.songInfo,
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h4", {
                                            style: styles.songTitle,
                                            children: song.songTitle
                                        }, void 0, false, {
                                            fileName: "[project]/src/app/page.js",
                                            lineNumber: 374,
                                            columnNumber: 19
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.js",
                                        lineNumber: 373,
                                        columnNumber: 17
                                    }, this)
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 371,
                                    columnNumber: 15
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    style: styles.songActions,
                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                        onClick: (e)=>{
                                            e.stopPropagation();
                                            handleAddToPlaylist(song);
                                        },
                                        style: styles.actionIcon,
                                        title: "Add to Playlist",
                                        children: "+"
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.js",
                                        lineNumber: 380,
                                        columnNumber: 17
                                    }, this)
                                }, void 0, false, {
                                    fileName: "[project]/src/app/page.js",
                                    lineNumber: 379,
                                    columnNumber: 15
                                }, this)
                            ]
                        }, song.id || `albumsong-${index}`, true, {
                            fileName: "[project]/src/app/page.js",
                            lineNumber: 366,
                            columnNumber: 13
                        }, this);
                    })
                }, void 0, false, {
                    fileName: "[project]/src/app/page.js",
                    lineNumber: 358,
                    columnNumber: 7
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/src/app/page.js",
            lineNumber: 324,
            columnNumber: 5
        }, this);
    // --- Main Return ---
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        style: {
            ...styles.appContainer,
            paddingBottom: activeYoutubeId ? styles.miniPlayer.height : '0px'
        },
        children: [
            activeYoutubeId && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("iframe", {
                style: styles.hiddenIframe,
                src: `https://www.youtube.com/embed/${activeYoutubeId}?autoplay=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1`,
                title: "YouTube Audio Player",
                frameBorder: "0",
                allow: "autoplay"
            }, activeYoutubeId, false, {
                fileName: "[project]/src/app/page.js",
                lineNumber: 395,
                columnNumber: 9
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                style: styles.mainContent,
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        style: styles.header,
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("h1", {
                                children: "🎶 Album Music Player"
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 403,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                onClick: ()=>window.location.href = "/login",
                                style: styles.adminButton,
                                children: "🔐 Admin"
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 404,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/page.js",
                        lineNumber: 402,
                        columnNumber: 9
                    }, this),
                    error && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        style: styles.errorBox,
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("p", {
                                children: [
                                    "Error: ",
                                    error
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 408,
                                columnNumber: 49
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                onClick: ()=>setError(null),
                                style: styles.errorDismiss,
                                children: "✕"
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 408,
                                columnNumber: 70
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/page.js",
                        lineNumber: 408,
                        columnNumber: 20
                    }, this),
                    selectedAlbum ? renderAlbumSongs() : renderAlbumList()
                ]
            }, void 0, true, {
                fileName: "[project]/src/app/page.js",
                lineNumber: 401,
                columnNumber: 7
            }, this),
            activeYoutubeId && currentSongInfo && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                style: styles.miniPlayer,
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("img", {
                        src: getThumbnailUrl(activeYoutubeId, 'default'),
                        alt: "",
                        style: styles.miniPlayerThumbnail
                    }, void 0, false, {
                        fileName: "[project]/src/app/page.js",
                        lineNumber: 422,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        style: styles.miniPlayerInfo,
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                style: styles.miniPlayerTitle,
                                title: currentSongInfo.songTitle,
                                children: currentSongInfo.songTitle
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 424,
                                columnNumber: 13
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                style: styles.miniPlayerArtist,
                                title: currentSongInfo.bandName,
                                children: currentSongInfo.bandName
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 425,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/page.js",
                        lineNumber: 423,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        style: styles.miniPlayerControls,
                        children: [
                            isPlayingFromPlaylist && playlist.length > 1 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Fragment"], {
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                        onClick: handlePlayPrevious,
                                        style: styles.miniPlayerButton,
                                        title: "Previous (Playlist)",
                                        children: "⏮️"
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.js",
                                        lineNumber: 431,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                        onClick: handlePlayNext,
                                        style: styles.miniPlayerButton,
                                        title: "Next (Playlist)",
                                        children: "⏭️"
                                    }, void 0, false, {
                                        fileName: "[project]/src/app/page.js",
                                        lineNumber: 432,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, void 0, true),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                onClick: handleStopPlayback,
                                style: {
                                    ...styles.miniPlayerButton,
                                    ...styles.miniPlayerCloseButton
                                },
                                title: "Close Player",
                                children: "✕"
                            }, void 0, false, {
                                fileName: "[project]/src/app/page.js",
                                lineNumber: 435,
                                columnNumber: 13
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/app/page.js",
                        lineNumber: 427,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/app/page.js",
                lineNumber: 421,
                columnNumber: 9
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/app/page.js",
        lineNumber: 391,
        columnNumber: 5
    }, this) // End appContainer
    ;
}
// --- Inline Styles --- (เพิ่ม/ปรับปรุง styles ที่จำเป็น)
const styles = {
    // ... (styles เดิมส่วนใหญ่ยังใช้ได้) ...
    appContainer: {
        fontFamily: 'sans-serif',
        backgroundColor: '#f0f2f5',
        minHeight: '100vh',
        position: 'relative'
    },
    mainContent: {
        maxWidth: '900px',
        margin: '0 auto',
        padding: '20px'
    },
    header: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '20px',
        borderBottom: '1px solid #e0e0e0',
        paddingBottom: '10px'
    },
    adminButton: {
        padding: '6px 12px',
        backgroundColor: '#6c757d',
        color: 'white',
        border: 'none',
        borderRadius: '4px',
        cursor: 'pointer',
        fontSize: '0.9em'
    },
    errorBox: {
        backgroundColor: '#f8d7da',
        color: '#721c24',
        border: '1px solid #f5c6cb',
        padding: '10px 15px',
        margin: '15px 0',
        borderRadius: '4px',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center'
    },
    errorDismiss: {
        background: 'none',
        border: 'none',
        fontSize: '1.2em',
        color: '#721c24',
        cursor: 'pointer'
    },
    loadingBox: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        padding: '40px',
        color: '#666',
        fontSize: '1.1em'
    },
    spinner: {
        border: '4px solid rgba(0, 0, 0, 0.1)',
        width: '24px',
        height: '24px',
        borderRadius: '50%',
        borderLeftColor: '#007bff',
        animation: 'spin 1s linear infinite',
        marginRight: '10px'
    },
    viewTitle: {
        fontSize: '1.5em',
        fontWeight: 'bold',
        margin: '25px 0 15px 0',
        color: '#333'
    },
    backButton: {
        background: 'none',
        border: 'none',
        color: '#007bff',
        cursor: 'pointer',
        marginBottom: '15px',
        fontSize: '1em',
        display: 'inline-flex',
        alignItems: 'center',
        padding: '5px 0',
        '&:hover': {
            textDecoration: 'underline'
        }
    },
    // Album Grid Styles
    albumGrid: {
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fill, minmax(160px, 1fr))',
        gap: '20px'
    },
    albumCard: {
        backgroundColor: '#fff',
        borderRadius: '8px',
        overflow: 'hidden',
        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
        cursor: 'pointer',
        transition: 'transform 0.2s ease, box-shadow 0.2s ease',
        '&:hover': {
            transform: 'translateY(-4px)',
            boxShadow: '0 6px 12px rgba(0,0,0,0.15)'
        }
    },
    albumCover: {
        width: '100%',
        aspectRatio: '1 / 1',
        objectFit: 'cover',
        display: 'block'
    },
    albumInfo: {
        padding: '10px'
    },
    albumTitle: {
        fontSize: '1em',
        fontWeight: 'bold',
        margin: '0 0 4px 0',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    },
    albumArtist: {
        fontSize: '0.85em',
        color: '#555',
        margin: '0 0 4px 0',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    },
    albumYear: {
        fontSize: '0.75em',
        color: '#888',
        margin: 0
    },
    // Album Detail Styles
    albumDetailHeader: {
        display: 'flex',
        alignItems: 'flex-end',
        gap: '25px',
        marginBottom: '30px',
        paddingBottom: '20px',
        borderBottom: '1px solid #eee'
    },
    albumDetailCover: {
        width: '150px',
        height: '150px',
        objectFit: 'cover',
        borderRadius: '6px',
        boxShadow: '0 4px 10px rgba(0,0,0,0.2)',
        flexShrink: 0
    },
    actionButton: {
        padding: '6px 12px',
        fontSize: '0.9em',
        cursor: 'pointer',
        borderRadius: '4px',
        border: '1px solid #ccc',
        backgroundColor: '#e9ecef'
    },
    // Song List Styles (minor adjustments maybe needed)
    songList: {},
    songItem: {
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'space-between',
        backgroundColor: '#ffffff',
        padding: '8px 12px',
        marginBottom: '8px',
        borderRadius: '6px',
        boxShadow: '0 1px 3px rgba(0,0,0,0.05)',
        // --- แทนที่ shorthand 'borderLeft' ---
        // ลบ: borderLeft: '4px solid transparent',
        borderLeftWidth: '4px',
        borderLeftStyle: 'solid',
        borderLeftColor: 'transparent',
        // -----------------------------------
        transition: 'background-color 0.2s ease, border-left-color 0.2s ease'
    },
    songItemActive: {
        backgroundColor: '#e7f3ff',
        borderLeftColor: '#007bff'
    },
    songContent: {
        display: 'flex',
        alignItems: 'center',
        gap: '12px',
        cursor: 'pointer',
        flexGrow: 1,
        overflow: 'hidden'
    },
    // songThumbnail is removed from album song list view
    songInfo: {
        overflow: 'hidden'
    },
    songTitle: {
        margin: '0 0 2px 0',
        fontSize: '1em',
        fontWeight: '500',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis',
        color: '#333'
    },
    songArtist: {
        margin: 0,
        fontSize: '0.85em',
        color: '#666',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    },
    songActions: {
        flexShrink: 0,
        marginLeft: '10px'
    },
    actionIcon: {
        background: 'none',
        border: '1px solid #ccc',
        color: '#555',
        borderRadius: '50%',
        width: '26px',
        height: '26px',
        fontSize: '1em',
        lineHeight: '24px',
        textAlign: 'center',
        cursor: 'pointer',
        transition: 'all 0.2s ease'
    },
    emptyListMessage: {
        textAlign: 'center',
        color: '#888',
        padding: '30px 15px',
        fontSize: '0.95em'
    },
    // Mini Player Styles (เหมือนเดิม)
    miniPlayer: {
        position: 'fixed',
        bottom: 0,
        left: 0,
        right: 0,
        height: '65px',
        backgroundColor: '#282828',
        color: '#fff',
        display: 'flex',
        alignItems: 'center',
        padding: '0 15px',
        boxShadow: '0 -2px 10px rgba(0,0,0,0.3)',
        zIndex: 1000
    },
    miniPlayerThumbnail: {
        width: '45px',
        height: '45px',
        borderRadius: '4px',
        marginRight: '12px',
        objectFit: 'cover',
        flexShrink: 0
    },
    miniPlayerInfo: {
        flexGrow: 1,
        overflow: 'hidden',
        marginRight: '15px'
    },
    miniPlayerTitle: {
        fontSize: '0.9em',
        fontWeight: '500',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    },
    miniPlayerArtist: {
        fontSize: '0.8em',
        color: '#b3b3b3',
        whiteSpace: 'nowrap',
        overflow: 'hidden',
        textOverflow: 'ellipsis'
    },
    miniPlayerControls: {
        display: 'flex',
        alignItems: 'center',
        gap: '10px',
        flexShrink: 0
    },
    miniPlayerButton: {
        background: 'none',
        border: 'none',
        color: '#b3b3b3',
        fontSize: '1.3em',
        cursor: 'pointer',
        padding: '5px',
        lineHeight: 1
    },
    miniPlayerCloseButton: {
        fontSize: '1.4em'
    },
    hiddenIframe: {
        position: 'absolute',
        top: '-9999px',
        left: '-9999px',
        width: '1px',
        height: '1px'
    },
    // Add keyframes for spinner
    '@keyframes spin': {
        '0%': {
            transform: 'rotate(0deg)'
        },
        '100%': {
            transform: 'rotate(360deg)'
        }
    }
}; // Apply keyframes using CSS file or library
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__385d8df7._.js.map