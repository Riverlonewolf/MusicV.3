{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Documents/Csc350%20pj1/musicv.3/src/lib/firebase.js"],"sourcesContent":["// lib/firebase.js (หรือ src/lib/firebase.js)\r\n\r\nimport { initializeApp, getApps, getApp } from 'firebase/app';\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDjKfFO7maPIOF8BspiU1wkLNgV9ipffNs\",\r\n  authDomain: \"testmusic-79383.firebaseapp.com\",\r\n  projectId: \"testmusic-79383\",\r\n  storageBucket: \"testmusic-79383.firebasestorage.app\",\r\n  messagingSenderId: \"198991673510\",\r\n  appId: \"1:198991673510:web:0a16a620d9b5d1805adc67\",\r\n  measurementId: \"G-5EW3XYPVR5\"\r\n};\r\n\r\n// Initialize Firebase App (ป้องกันการ init ซ้ำ)\r\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\r\n\r\n// Initialize Firebase Services\r\nconst auth = getAuth(app);\r\nconst db = getFirestore(app);\r\n\r\n// -------- นี่คือบรรทัดที่สำคัญ --------\r\n// Export สิ่งที่ต้องการให้ไฟล์อื่นนำไปใช้\r\nexport { app, auth, db };\r\n// -------------------------------------"],"names":[],"mappings":"AAAA,6CAA6C;;;;;;AAE7C;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,wCAAwC;AACxC,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,gDAAgD;AAChD,MAAM,MAAM,CAAC,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,GAAG,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE,kBAAkB,CAAA,GAAA,uLAAA,CAAA,SAAM,AAAD;AAErE,+BAA+B;AAC/B,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;;;;;CAKxB,wCAAwC","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/User/Documents/Csc350%20pj1/musicv.3/src/app/login/page.js"],"sourcesContent":["// app/login/page.js\r\n\"use client\";\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n// --- 1. Import Firebase Auth และ auth instance ---\r\nimport { signInWithEmailAndPassword } from 'firebase/auth';\r\nimport { auth } from '@/lib/firebase'; // <-- ปรับ path ถ้า firebase.js ไม่ได้อยู่ใน lib\r\n\r\nexport default function LoginPage() {\r\n  // --- !! เปลี่ยน username เป็น email เพื่อให้ตรงกับ Firebase Auth !! ---\r\n  const [email, setEmail] = useState(''); // ใช้ email state\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const router = useRouter();\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();//ไม่ให้หน้าเว็บรีโหลดตัวเองแบบปกติเมื่อกดปุ่ม\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // --- 2. แทนที่ Fetch ด้วย Firebase Sign In ---\r\n      // ใช้ email และ password จาก state\r\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n      //ขอเข้าสู่ระบบจริง:่ email และ password ที่ผู้ใช้กรอกไปให้ Firebase ตรวจสอบถ้าข้อมูลถูกต้อง Firebase จะตอบกลับมาว่า “ล็อกอินได้แล้ว”เราใช้ await เพราะต้องรอ Firebase ตอบก่อนถึงจะไปขั้นตอนต่อไป\r\n\r\n      // --- 3. Login สำเร็จ ---\r\n      console.log('Firebase Login successful:', userCredential.user);\r\n      // สามารถเข้าถึง user data ผ่าน userCredential.user\r\n\r\n      // Redirect ไปหน้า Admin\r\n      router.push('/admin');\r\n\r\n    } catch (err) {\r\n      // --- 4. จัดการ Error จาก Firebase ---\r\n      console.error('Firebase Login Error:', err.code, err.message);\r\n      let friendlyErrorMessage = 'เกิดข้อผิดพลาดในการเข้าสู่ระบบ';\r\n      // แปลง Firebase error codes เป็นข้อความที่ผู้ใช้เข้าใจง่าย\r\n      switch (err.code) {\r\n        case 'auth/invalid-email':\r\n          friendlyErrorMessage = 'รูปแบบอีเมลไม่ถูกต้อง';\r\n          break;\r\n        case 'auth/user-disabled':\r\n          friendlyErrorMessage = 'บัญชีผู้ใช้นี้ถูกปิดใช้งาน';\r\n          break;\r\n        case 'auth/user-not-found':\r\n        case 'auth/wrong-password':\r\n        case 'auth/invalid-credential': // สำหรับ SDK เวอร์ชั่นใหม่ๆ\r\n          friendlyErrorMessage = 'อีเมลหรือรหัสผ่านไม่ถูกต้อง';\r\n          break;\r\n        default:\r\n          friendlyErrorMessage = 'เกิดข้อผิดพลาด กรุณาลองใหม่อีกครั้ง';\r\n      }\r\n      setError(friendlyErrorMessage);\r\n\r\n    } finally {\r\n      setIsLoading(false); // หยุด loading เสมอ\r\n    }\r\n  };//ถ้ามีอะไรผิดพลาด เช่น:กรอกอีเมลผิดรหัสผ่านไม่ถูกหรือบัญชีไม่มีอยู่ เราก็จะ แสดงข้อความ error แบบที่ผู้ใช้เข้าใจง่าย เช่น:“อีเมลหรือรหัสผ่านไม่ถูกต้อง”“รูปแบบอีเมลไม่ถูกต้อง” ฯลฯ\r\n\r\n  return (\r\n    \r\n    <div style={styles.container}>\r\n      <div style={styles.loginBox}>\r\n        <h1 style={styles.title}>เข้าสู่ระบบแอดมิน</h1>\r\n        <form onSubmit={handleLogin}>\r\n          <div style={styles.inputGroup}>\r\n            {/* --- เปลี่ยนเป็น Input สำหรับ Email --- */}\r\n            <label htmlFor=\"email\" style={styles.label}>อีเมล:</label>\r\n            <input\r\n              type=\"email\" // ใช้ type=\"email\"\r\n              id=\"email\"\r\n              value={email} // ผูกกับ email state\r\n              onChange={(e) => setEmail(e.target.value)} // อัปเดต email state\r\n              style={styles.input}\r\n              required\r\n              disabled={isLoading}\r\n              placeholder=\"กรอกอีเมล\"\r\n            />\r\n          </div>\r\n          <div style={styles.inputGroup}>\r\n            <label htmlFor=\"password\" style={styles.label}>รหัสผ่าน:</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              style={styles.input}\r\n              required\r\n              disabled={isLoading}\r\n              placeholder=\"กรอกรหัสผ่าน\"\r\n            />\r\n          </div>\r\n          \r\n          {error && <p style={styles.error}>{error}</p>}\r\n          <button type=\"submit\" style={styles.button} disabled={isLoading}>\r\n            {isLoading ? 'กำลังเข้าสู่ระบบ...' : 'เข้าสู่ระบบ'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  \r\n}\r\n\r\n// --- Styles (เหมือนเดิม) ---\r\nconst styles = {\r\n   \r\n        container: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        minHeight: '100vh',\r\n        backgroundColor: '#f0f2f5',\r\n        fontFamily: \"'Kanit', sans-serif\",\r\n        },\r\n        loginBox: {\r\n        padding: '40px',\r\n        backgroundColor: 'white',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',\r\n        textAlign: 'center',\r\n        width: '100%',\r\n        maxWidth: '400px',\r\n        },\r\n        title: {\r\n        marginBottom: '30px',\r\n        color: '#333',\r\n        fontSize: '1.8rem',\r\n        },\r\n        inputGroup: {\r\n        marginBottom: '20px',\r\n        textAlign: 'left',\r\n        },\r\n        label: {\r\n        display: 'block',\r\n        marginBottom: '5px',\r\n        color: '#555',\r\n        fontWeight: '500',\r\n        },\r\n        input: {\r\n        width: '100%',\r\n        padding: '12px 15px',\r\n        border: '1px solid #ccc',\r\n        borderRadius: '4px',\r\n        fontSize: '1rem',\r\n        boxSizing: 'border-box',\r\n        },\r\n        button: {\r\n        width: '100%',\r\n        padding: '12px 20px',\r\n        backgroundColor: '#007bff',\r\n        border: 'none',\r\n        borderRadius: '4px',\r\n        color: 'white',\r\n        fontSize: '1.1rem',\r\n        cursor: 'pointer',\r\n        transition: 'background-color 0.3s ease, opacity 0.3s ease',\r\n        marginTop: '10px',\r\n        },\r\n        'button:disabled': { // เพิ่ม style สำหรับปุ่ม disabled\r\n        backgroundColor: '#a0cfff',\r\n        cursor: 'not-allowed',\r\n        },\r\n        error: {\r\n        color: 'red',\r\n        marginTop: '-10px',\r\n        marginBottom: '15px',\r\n        fontSize: '0.9rem',\r\n        }\r\n};"],"names":[],"mappings":"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","debugId":null}}]
}